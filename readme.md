# Spring Boot Registration Project

By Cleiton Balansin

## Introduction

The main objective of this project is to bring together the various technologies accessible by SpringBoot.
The project starts as simple as possible, but over the commits new features will be added.
You will find comments and explanations of each topic in the sections "Tags and Commits" and "Tags", 

## Running

It's a Maven Project!
Commands:
- mvn clean compile - Clean and compile the project;
- mvn spring-boot:run - Run the application;


### The project: Registration

This project has the functionality to store data of any type. You can store data about a "Person" or a "Car" or a "Dog". For this you must create entities that will define the data saved by each type of register ("Person", "Car" or "Dog") you want.

## Tags, Commits and comments about


- 100_initial
  - First commit - project made by spring-initializr - no changes
  - Files from spring-initializr - original zip and configuration used
    - The first two commits are related to project generated by spring-initializr (https://start.spring.io/). The original project generated, the original zip file and an image from the site with the configuration used to generate this project.
  - The readme.md file
    - Contains the firsts topics: "Introduction", "running", "the project", "commits" and "tags".
- 101_first_endpoint
  - the first endpoint returns the datetime of server
- 102_spring_actuator
  - Change /time to return an ISO-8601 representation of date
    - This is a easier way to represent datetime in a string, a javascript code, for example, can turn it into a date object very easy.
  - Added actuator dependency
  - Change the port of actuator management server
    - we change application.properties file defining the server port and the management server port
  - Enable all of actuator endpoints by properties file - Change the default discovery endpoint /actuator to /act by properties file
  - Added git informations into /act/info endpoint of actuator
  - Added maven build informations into /act/info endpoint of actuator
  - Change the exposure of actuator's endpoints to expose only info,health,metrics

## Tags

### 100_initial - Initial project

The initial project has only two dependencies: 
- "spring-boot-starter-web" (this one make your java project into a web java project),
- "spring-boot-starter-test" (and this adds into your project the possibility to use tests, and a class SpringbootregistrationApplicationTests already exists in the initial project).

Besides the dependencies we have the plugin:
- "spring-boot-maven-plugin" (this one allows we use spring-boot commands in maven).

We need run "mvn clean compile" to compile the project and "mvn spring-boot:run" to run the application. After that, you can access the application in the browser: http://localhost:8080/. "Whitelabel Error Page" must appear because we still haven't defined anything, but the Tomcat server is running.

### 101_newtag - The first endpoint

The class **TimeController** contains two annotations: RestController (https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/RestController.html)
and GetMapping (https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/GetMapping.html).

**RestController** is a specialized version of the controller. It includes the @Controller and @ResponseBody annotations, and as a result, simplifies the controller implementation (https://www.baeldung.com/spring-controller-vs-restcontroller).

**GetMapping** annotation is a specialized version of @RequestMapping annotation that acts as a shortcut for @RequestMapping(method = RequestMethod.GET) (https://howtodoinjava.com/spring5/webmvc/controller-getmapping-postmapping/).

Now, after running the application, it is possible to access the address http://localhost:8080/time and see something like: _Wed Nov 16 00:38:37 BRST 2022_ (result of the line "new Date().toString()" in the method "public String time()").


### 102_spring_actuator

Spring Boot's Actuator dependency is used to monitor and manage the Spring web application.
Actuator is mainly used to expose operational information about the running application â€” health, metrics, info, dump, env, etc. It uses HTTP endpoints or JMX beans to enable us to interact with it (https://www.baeldung.com/spring-boot-actuators).
Now, after running the application, it is possible to access the address http://localhost:9001/actuator/health, for example, to see the status of the server ("UP" is expected).

Actuator can respond in different port than the application, for that we change application.properties file.

We change the default endpoint to http://localhost:9001/act and enable all the endpoints of actuator changing the properties "management.endpoints.web.exposure.include" and "management.endpoints.web.base-path".

Now we can access git informations in http://localhost:9001/act/info endpoint thanks to "git-commit-id-plugin" plugin.
Also we can access maven build informations thanks to "spring-boot-maven-plugin" plugin, here we must define a "goal" in the pom file (< goal>build-info</ goal>).

We also change the exposure of actuator's endpoints to expose only info,health,metrics by setting "management.endpoints.web.exposure.include" property, in the same way we can change "management.endpoints.web.exposure.exclude" property, but with the names of endpoints we want to exclude!
